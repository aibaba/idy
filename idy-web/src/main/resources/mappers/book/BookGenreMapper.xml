<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.doogua.api.dao.book.BookGenreMapper">
	<resultMap id="BookGenre_RM" type="BookGenre">
		<id property="genreId" column="genre_id" />
		<id property="caption" column="caption" />
		<id property="intro" column="intro" />
		<id property="_class" column="class" />
		<id property="display" column="display" />
		<id property="order" column="order" />
		<id property="status" column="status" />
	</resultMap>

	<sql id="Base_Column_List">
		genre_id,caption,intro,`class`,display,`order`,`status`
	</sql>

	<select id="count" resultType="long">
		SELECT COUNT(1) FROM book_genre
		<where>
			<if test=" null != genreId ">
				AND genre_id = #{genreId}
			</if>
			<if test=" null != caption ">
				AND caption = #{caption}
			</if>
			<if test=" null != intro ">
				AND intro = #{intro}
			</if>
			<if test=" null != _class ">
				AND `class` = #{_class}
			</if>
			<if test=" null != display ">
				AND display = #{display}
			</if>
			<if test=" null != order ">
				AND `order` = #{order}
			</if>
			<if test=" null != status ">
				AND `status` = #{status}
			</if>
		</where>
	</select>

	<select id="countAll" resultType="long">
		SELECT COUNT(1) FROM book_genre
	</select>

	<insert id="create" parameterType="map" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO book_genre (<include refid="Base_Column_List" />)
		VALUES (#{genreId},#{caption},#{intro},#{_class},#{display},#{order},#{status})
	</insert>

	<delete id="del" parameterType="BookGenre">
		DELETE FROM book_genre
		<where>
			<if test=" null != genreId ">
				AND genre_id = #{genreId}
			</if>
			<if test=" null != caption ">
				AND caption = #{caption}
			</if>
			<if test=" null != intro ">
				AND intro = #{intro}
			</if>
			<if test=" null != _class ">
				AND `class` = #{_class}
			</if>
			<if test=" null != display ">
				AND display = #{display}
			</if>
			<if test=" null != order ">
				AND `order` = #{order}
			</if>
			<if test=" null != status ">
				AND `status` = #{status}
			</if>
		</where>
	</delete>

	<delete id="delById" parameterType="java.lang.Integer">
		DELETE FROM book_genre WHERE genre_id = #{genre_id}
	</delete>

	<select id="find" resultMap="BookGenre_RM">
		SELECT <include refid="Base_Column_List" /> 
		FROM book_genre
		<where>
			<if test=" null != genreId ">
				AND genre_id = #{genreId}
			</if>
			<if test=" null != caption ">
				AND caption = #{caption}
			</if>
			<if test=" null != intro ">
				AND intro = #{intro}
			</if>
			<if test=" null != _class ">
				AND `class` = #{_class}
			</if>
			<if test=" null != display ">
				AND display = #{display}
			</if>
			<if test=" null != order ">
				AND `order` = #{order}
			</if>
			<if test=" null != status ">
				AND `status` = #{status}
			</if>
		</where>
		<if test=" null != start and null != limit">
			LIMIT  #{start},#{limit}
		</if>
	</select>

	<select id="findById" resultMap="BookGenre_RM" parameterType="java.lang.Long">
		SELECT <include refid="Base_Column_List" /> 
		FROM book_genre 
		WHERE genre_id = #{genre_id}
	</select>

	<update id="update" parameterType="BookGenre">
		UPDATE book_genre
		SET
			<if test=" null != caption ">
				 caption = #{caption},
			</if>
			<if test=" null != intro ">
				 intro = #{intro},
			</if>
			<if test=" null != _class ">
				 `class` = #{_class},
			</if>
			<if test=" null != display ">
				 display = #{display},
			</if>
			<if test=" null != order ">
				 `order` = #{order},
			</if>
			<if test=" null != status ">
				 `status` = #{status},
			</if>
			genre_id = #{genreId}
			WHERE genre_id = #{genreId}
	</update>
</mapper>